<html>
    <head>
        <style>
            *{padding: 0; margin: 0;}
            canvas{background: #eee; display: block; margin: 0 auto;}
        </style>
    </head>
    <body>
        <canvas id="myCanvas" width="256" height="240"></canvas>
        <script type="text/javascript">
            let canvas = document.getElementById("myCanvas");
            let ctx = canvas.getContext("2d");
            let windowWidth = window.innerWidth / 256;
            let windowHeight = window.innerHeight / 240;

            if(windowWidth>windowHeight) {
                document.body.style.zoom = windowHeight;
            }
            else {
                document.body.style.zoom = windowWidth;
            }

            function updateZoom() {
                windowWidth = window.innerWidth / 256;
                windowHeight = window.innerHeight / 240;                
                if(windowWidth>windowHeight) {
                document.body.style.zoom = windowHeight;
            }
            else {
                document.body.style.zoom = windowWidth;
            }                
            }

            window.onresize = updateZoom;

            let fps = 60;
            let spriteWidth = 16;
            let spriteHeight = 16;

            let spriteGap = 1;
            let sheetUnitWidth = 16;
            let sheetUnitHeight = 16;
            let totalSheetWidth = sheetUnitWidth + spriteGap * 2;
            let totalSheetHeight = sheetUnitHeight + spriteGap * 2;
            let worldTiles = new Image();
            worldTiles.src = "tiles-overworld.png";

            let map7_7 = [
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                [ 61, 61, 61, 61, 61, 61, 61,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 61, 61, 61, 28, 61, 62,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 61, 61, 62,  2,  2,  2,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 61, 62,  2,  2,  2,  2,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 62,  2,  2,  2,  2,  2,  2,  2, 60, 61, 61, 61, 61, 61, 61],
                [  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2],
                [ 43, 44,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 43, 43],
                [ 61, 61,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 61, 61],
                [ 61, 61,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 61, 61],
                [ 61, 61, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 61, 61],
                [ 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61]
            ];

            function drawMap(level) {
                for(let i = 0; i < level.length; i++) {
                    for(let j = 0; j < level[i].length; j++) {
                        ctx.drawImage(worldTiles, ((level[i][j]%totalSheetWidth) * (sheetUnitWidth+spriteGap)) + spriteGap,
                    (Math.floor(level[i][j]/totalSheetHeight) * (sheetUnitHeight+spriteGap)) + spriteGap,
                    sheetUnitWidth, sheetUnitHeight, j * spriteWidth, i * spriteHeight, spriteWidth, spriteHeight);
                    }

                }
            }

            function draw() {
                setTimeout(function() {
                    requestAnimationFrame(draw);
                    ctx.fillStyle = "rgb(20,20,20)";
                    ctx.fillRect(0,0,256,240);

                drawMap(map7_7);
                },1000/fps);
            }
            draw();

        </script>
    </body>
</html>